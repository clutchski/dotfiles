# Environment (PATH, editor, aliases)
. ~/.profile.sh

# History
setopt append_history       # append rather than overwrite
setopt share_history        # share history across sessions
setopt hist_ignore_dups     # skip consecutive duplicates
setopt hist_ignore_space    # skip commands starting with space
setopt hist_reduce_blanks   # trim extra whitespace
setopt extended_history     # save timestamps
HISTFILE=~/.zsh_history
HISTSIZE=10000
SAVEHIST=10000

# Directory navigation
setopt auto_cd              # cd by typing directory name
setopt auto_pushd           # push dirs onto stack automatically
setopt pushd_ignore_dups    # no duplicate dirs on stack

# Completion system
# Completions generated by hooks/completions.sh
fpath=(~/.zsh/completions ${HOMEBREW_PREFIX:-$(brew --prefix)}/share/zsh/site-functions $fpath)
autoload -Uz compinit && compinit

# Antidote plugin manager (plugins listed in ~/.zsh_plugins.txt)
source ${HOMEBREW_PREFIX:-$(brew --prefix)}/share/antidote/antidote.zsh
antidote load ~/.zsh_plugins.txt

# Mise
if command -v mise &>/dev/null; then
    eval "$(mise activate zsh)"
fi

eval "$(starship init zsh)"

# Misc
DISABLE_AUTO_TITLE=true     # don't let shell override terminal title
setopt no_prompt_cr         # don't print a CR before the prompt
unsetopt correct_all        # disable zsh command correction
